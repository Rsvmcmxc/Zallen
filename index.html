<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pizzaria do Gordo â€“ Delivery</title>

<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1091349129834422');
fbq('track', 'PageView'); // page view ao carregar
</script>
<noscript>
  <img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1091349129834422&ev=PageView&noscript=1"/>
</noscript>
<!-- End Meta Pixel Code -->

<style>
  :root {
    --red:#d62828;--green:#2a9d8f;--yellow:#fcbf49;--orange:#f77f00;--bg:#fffdf9;
  }
  body {
    margin:0;
    font-family:"Inter",sans-serif;
    background:var(--bg);
    color:#222;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  /* ... todo o CSS que vocÃª jÃ¡ tinha permanece igual ... */
</style>
</head>
<body>

<header>
  <div class="overlay">
    <div class="logo"><img src="logo-pizzaria.png" alt="Logo Pizzaria do Gordo"></div>
    <h1>ğŸ• Pizzaria do Gordo</h1>
    <p>âš¡ Oferta sÃ³ no delivery: Pizza FamÃ­lia + 4 sabores + borda recheada = R$39,90 ğŸ•</p>
    <div class="status-bar">
      <span>â­ 4,9 (792 avaliaÃ§Ãµes)</span>
      <span>ğŸ“ 1,7 km</span>
      <span class="dot"></span><span>Aberto agora</span>
    </div>
  </div>
</header>

<div class="card">
  <div class="pill">OFERTA ESPECIAL</div>
  <div class="product-title">Pizza FamÃ­lia + Refri 2L</div>
  <p class="desc">Monte atÃ© <b>4 sabores</b> + escolha sua borda favorita.</p>
  <p class="bonus">ğŸ¥¤ Refrigerante 2L grÃ¡tis + ğŸšš Entrega grÃ¡tis!</p>
  <div class="countdown" id="countdown">PromoÃ§Ã£o expira em: 00:15:00</div>

  <!-- SABORES -->
  <div class="sabores">
    <h3>Escolha atÃ© 4 sabores:</h3>
    <div class="sabor-item" data-value="Margherita">Margherita ğŸ…</div>
    <div class="sabor-item" data-value="Pepperoni">Pepperoni ğŸ•</div>
    <div class="sabor-item" data-value="Quatro Queijos">Quatro Queijos ğŸ§€</div>
    <div class="sabor-item" data-value="Frango c/ Catupiry">Frango c/ Catupiry ğŸ”</div>
    <div class="sabor-item" data-value="Portuguesa">Portuguesa ğŸ‡µğŸ‡¹</div>
    <div class="sabor-item" data-value="Calabresa">Calabresa ğŸŒ¶</div>
    <div class="sabor-item" data-value="Baiana">Baiana ğŸ”¥</div>
    <div class="sabor-item" data-value="Veggie">Veggie ğŸ¥¦</div>
    <div class="sabor-item" data-value="Toscana">Toscana ğŸ·</div>
    <div class="sabor-item" data-value="Lombo c/ Catupiry">Lombo c/ Catupiry ğŸ¥©</div>
  </div>

  <!-- BORDAS -->
  <div class="bordas">
    <span>Escolha sua borda:</span>
    <label class="borda-option"><input type="radio" name="borda" value="Tradicional" checked> Tradicional</label>
    <label class="borda-option"><input type="radio" name="borda" value="Catupiry"> Catupiry ğŸ§€</label>
    <label class="borda-option"><input type="radio" name="borda" value="Cheddar"> Cheddar ğŸŸ¡</label>
    <label class="borda-option"><input type="radio" name="borda" value="Chocolate"> Chocolate ğŸ«</label>
  </div>

  <div class="aviso" id="aviso">âš  MÃ¡ximo de 4 sabores!</div>

  <!-- CARRINHO -->
  <div class="cart" id="cart"></div>

  <!-- ENDEREÃ‡O -->
  <div class="endereco" id="endereco">
    <input type="text" id="nome" placeholder="Seu nome completo">
    <input type="tel" id="telefone" placeholder="WhatsApp para contato">
    <input type="text" id="rua" placeholder="Rua e nÃºmero">
    <input type="text" id="bairro" placeholder="Bairro">
    <input type="text" id="complemento" placeholder="Complemento (opcional)">
  </div>

  <!-- BOTÃƒO -->
  <button class="btn" id="finalizar">ğŸ• PAGAR AGORA â€“ R$39,90</button>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2>âœ… Pedido Recebido!</h2>
    <p>Obrigado, <span id="clienteNome"></span>! Sua pizza jÃ¡ estÃ¡ reservada ğŸ•ğŸ”¥</p>
    <div class="detalhes" id="resumoPedido"></div>
    <p>ğŸ‘‰ Agora Ã© sÃ³ confirmar o pagamento para nossa equipe iniciar o preparo imediato.</p>
    <button class="pagamento" onclick="irPagamento()">ğŸ’³ Ir para Pagamento</button><br>
    <button class="fechar" onclick="fecharModal()">Fechar</button>
  </div>
</div>

<script>
const checkoutURL = "https://go.tribopay.com.br/ou2nmp9gu1";

// Contador
let time = 15*60;
const el = document.getElementById('countdown');
setInterval(()=>{
  let min = String(Math.floor(time/60)).padStart(2,'0');
  let sec = String(time%60).padStart(2,'0');
  el.innerText = `PromoÃ§Ã£o expira em: 00:${min}:${sec}`;
  if(time>0) time--;
},1000);

// SeleÃ§Ã£o sabores e carrinho
const items = document.querySelectorAll('.sabor-item');
const aviso = document.getElementById('aviso');
const finalizar = document.getElementById('finalizar');
const cart = document.getElementById('cart');
const endereco = document.getElementById('endereco');
const modal = document.getElementById('modal');

function atualizarCarrinho(){
  const selecionados = Array.from(document.querySelectorAll('.sabor-item.selected')).map(i=>i.dataset.value);
  const borda = document.querySelector('input[name="borda"]:checked').value;
  if(selecionados.length>0){
    cart.style.display='flex';
    endereco.style.display='flex';
    cart.innerHTML=`
      <div class='cart-item'>ğŸ• Sabores escolhidos: ${selecionados.join(', ')}</div>
      <div class='cart-item'>ğŸŒŸ Borda: ${borda}</div>
      <div class='cart-item'>ğŸ’° Total: R$39,90</div>`;
  } else {
    cart.style.display='none';
    endereco.style.display='none';
  }
}

items.forEach(item=>{
  item.addEventListener('click',()=>{
    const selecionados = document.querySelectorAll('.sabor-item.selected').length;
    if(item.classList.contains('selected')){item.classList.remove('selected');}
    else {
      if(selecionados<4) {
        item.classList.add('selected');
        fbq('track', 'ViewContent'); // pixel dispara ao escolher sabor
      } else {
        aviso.style.display='block';
        setTimeout(()=>{aviso.style.display='none';},2000);
      }
    }
    atualizarCarrinho();
    verificarSelecao();
  });
});

document.querySelectorAll('.bordas input').forEach(rb=>{
  rb.addEventListener('change',()=>{atualizarCarrinho(); verificarSelecao();});
});

function verificarSelecao(){
  const saboresSel = document.querySelectorAll('.sabor-item.selected').length;
  const borda = document.querySelector('input[name="borda"]:checked');
  const nome = document.getElementById('nome').value.trim();
  const tel = document.getElementById('telefone').value.trim();
  const rua = document.getElementById('rua').value.trim();
  const bairro = document.getElementById('bairro').value.trim();

  if(saboresSel>0 && borda && nome && tel && rua && bairro){
    finalizar.style.display='block';
  } else {
    finalizar.style.display='none';
  }
}

// Atualiza quando digitar no endereÃ§o
document.querySelectorAll('.endereco input').forEach(input=>{
  input.addEventListener('input',verificarSelecao);
});

// Modal + Pixel
finalizar.addEventListener('click',()=>{
  const selecionados = Array.from(document.querySelectorAll('.sabor-item.selected')).map(i=>i.dataset.value);
  const borda = document.querySelector('input[name="borda"]:checked').value;
  const nome = document.getElementById('nome').value.trim();
  const tel = document.getElementById('telefone').value.trim();
  const rua = document.getElementById('rua').value.trim();
  const bairro = document.getElementById('bairro').value.trim();
  const comp = document.getElementById('complemento').value.trim();

  document.getElementById('clienteNome').textContent = nome.split(" ")[0];
  document.getElementById('resumoPedido').innerHTML = `
    <p><strong>Sabores:</strong> ${selecionados.join(', ')}</p>
    <p><strong>Borda:</strong> ${borda}</p>
    <p><strong>EndereÃ§o:</strong> ${rua}, ${bairro} ${comp ? "- "+comp : ""}</p>
    <p><strong>Contato:</strong> ${tel}</p>
    <p><strong>Total:</strong> R$39,90</p>
  `;
  modal.style.display = "flex";

  // Evento pixel ao clicar em finalizar
  fbq('track', 'InitiateCheckout', {value:39.90, currency:'BRL'});
});

function fecharModal(){ modal.style.display="none"; }

function irPagamento(){ 
  fbq('track', 'Purchase', {value:39.90, currency:'BRL'}); // evento purchase
  window.open(checkoutURL,'_blank'); 
}
</script>
</body>
</html>
